<!doctype html>
<head>
  <meta charset="utf-8">
  <title></title>
  <meta name="description" content="Waypoint's web application for creating quests">
  <meta name="viewport" content="width=device-width">
<!--   <link rel="stylesheet" href="styles/main.css">
 -->
</head>
<body>
  <!-- <h2>Welcome home!</h2> -->
  <div id="content"></div>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script src="scripts/app.js"></script>
  <script>
    if (window.location.hash && window.location.hash === "#/_=_") {
      window.location.hash = "";
    }

    // var getQuest = function(questId) {

    //     return $.ajax({
    //         url: 'http://localhost:3000/quests/' + questId
    //       })
    //         .done(function (res) {
    //           console.log(res);
    //           return res;
    //         })
    //         .fail(function (res) {
    //           console.log(res);
    //           return res;
    //         });
    //   };

    var saveWaypoint = function(waypointObj, httpMethod) {
      console.log('waypointObj passed in: ', waypointObj);
      console.log('httpMethod passed in: ', httpMethod);
      
      if (!waypointObj || !httpMethod) {
        throw new Error("Missing argument(s) to saveQuest(). Provide quest object and http method POST or PUT");
      } else if (!(httpMethod === "POST" || httpMethod === "PUT")) {

        throw new Error("Provided httpMethod must be POST or PUT");
      }

      return $.ajax({
        url: 'http://localhost:3000/quests/' + waypointObj.questId +'/waypoints',
        method: httpMethod,
        data: JSON.stringify(waypointObj),
        dataType: 'json',
        contentType: 'application/json'
      })
        .done(function (res) {
          console.log('saveQuest success: ')
          console.log(res);
          return res;
        })
        .fail(function (res) {
          console.log('saveQuest fail: ')
          console.log(res);
          return res;
        });
    };

    var obj = {
      questId: 18,
      indexInQuest: 0,
      latitude: 123,
      longitude: 123,
      title: 'Big Tree',
      description: 'My favorite tree to sniff. Try sniffing the tree.',
    };

    saveWaypoint(obj, 'POST');

    // getQuest(2);
  </script>
</body>
</html>
